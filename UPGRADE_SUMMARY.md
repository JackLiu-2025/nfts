# ğŸ‰ å¯é…ç½®å¹³å°è´¹ç”¨åŠŸèƒ½ - å‡çº§å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ™ºèƒ½åˆçº¦å‡çº§
- âœ… å°†ç¡¬ç¼–ç çš„ 2.5% è´¹ç‡æ”¹ä¸ºå¯é…ç½®å˜é‡
- âœ… æ·»åŠ è´¹ç”¨å¼€å…³åŠŸèƒ½ï¼ˆå¯å¯ç”¨/ç¦ç”¨ï¼‰
- âœ… æ·»åŠ è´¹ç‡ä¸Šé™ä¿æŠ¤ï¼ˆæœ€å¤§ 10%ï¼‰
- âœ… æ·»åŠ  owner æƒé™æ§åˆ¶
- âœ… æ·»åŠ è´¹ç”¨å˜æ›´äº‹ä»¶è®°å½•
- âœ… æ–°å¢ 3 ä¸ªç®¡ç†å‡½æ•°å’Œ 2 ä¸ªäº‹ä»¶

### 2. æµ‹è¯•å®Œå–„
- âœ… æ–°å¢ 7 ä¸ªè´¹ç”¨ç®¡ç†æµ‹è¯•ç”¨ä¾‹
- âœ… æ‰€æœ‰ 19 ä¸ªæµ‹è¯•é€šè¿‡ï¼ˆ100%ï¼‰
- âœ… æµ‹è¯•è¦†ç›–ï¼šé»˜è®¤é…ç½®ã€è´¹ç‡ä¿®æ”¹ã€æƒé™æ§åˆ¶ã€è´¹ç”¨å¼€å…³ã€å®é™…æ”¶è´¹

### 3. åˆçº¦éƒ¨ç½²
- âœ… éƒ¨ç½²åˆ° Polygon Amoy æµ‹è¯•ç½‘
- âœ… åˆçº¦åœ°å€: `0x4681BE5B76bACF483Ec7d6f228f6F4C31394c761`
- âœ… éƒ¨ç½²è€…: `0x19C360231E261666CDB30f213cd76877f48bD21e`
- âœ… åŒºå—æµè§ˆå™¨éªŒè¯ï¼ˆå°è¯•ä¸­ï¼‰

### 4. é…ç½®æ›´æ–°
- âœ… å‰ç«¯ .env æ›´æ–°ï¼ˆæ–°åˆçº¦åœ°å€ï¼‰
- âœ… åç«¯ .env æ›´æ–°ï¼ˆæ–°åˆçº¦åœ°å€ + æ–°èµ·å§‹åŒºå—ï¼‰
- âœ… å‰ç«¯ ABI æ›´æ–°ï¼ˆåŒ…å«æ–°å‡½æ•°å’Œäº‹ä»¶ï¼‰

### 5. ç®¡ç†å·¥å…·
- âœ… åˆ›å»ºè´¹ç”¨é…ç½®æŸ¥è¯¢è„šæœ¬ (`test-fee-config.js`)
- âœ… åˆ›å»ºäº¤äº’å¼è´¹ç”¨ç®¡ç†å·¥å…· (`manage-fees.js`)
- âœ… åˆ›å»ºæœåŠ¡é‡å¯è„šæœ¬ (`restart-services.sh`)

### 6. æ–‡æ¡£å®Œå–„
- âœ… éƒ¨ç½²æ€»ç»“æ–‡æ¡£ (`CONFIGURABLE_FEE_DEPLOYMENT.md`)
- âœ… è´¹ç”¨ç®¡ç†æŒ‡å— (`FEE_MANAGEMENT_GUIDE.md`)
- âœ… å‡çº§æ€»ç»“æ–‡æ¡£ï¼ˆæœ¬æ–‡æ¡£ï¼‰

## ğŸ“Š æ–°åŠŸèƒ½è¯¦æƒ…

### å¯é…ç½®è´¹ç‡
```solidity
// é»˜è®¤ 2.5%ï¼Œå¯è°ƒæ•´ä¸º 0-10%
uint256 public marketplaceFeePercent = 250;

// ä¿®æ”¹è´¹ç‡ï¼ˆä»… ownerï¼‰
function setMarketplaceFee(uint256 newFeePercent) public onlyOwner
```

### è´¹ç”¨å¼€å…³
```solidity
// é»˜è®¤å¯ç”¨
bool public feesEnabled = true;

// å¼€å¯/å…³é—­è´¹ç”¨ï¼ˆä»… ownerï¼‰
function setFeesEnabled(bool enabled) public onlyOwner
```

### æŸ¥è¯¢é…ç½®
```solidity
// è·å–å½“å‰é…ç½®
function getMarketplaceFeeConfig() public view returns (
    uint256 feePercent,
    bool enabled,
    uint256 maxFeePercent
)
```

## ğŸ”§ å¿«é€Ÿä½¿ç”¨æŒ‡å—

### æŸ¥çœ‹å½“å‰é…ç½®
```bash
cd contracts
npx hardhat run scripts/test-fee-config.js --network polygonAmoy
```

### ç®¡ç†è´¹ç”¨ï¼ˆäº¤äº’å¼ï¼‰
```bash
cd contracts
npx hardhat run scripts/manage-fees.js --network polygonAmoy
```

### é‡å¯æœåŠ¡
```bash
./restart-services.sh
```

## ğŸ“‹ åˆçº¦å¯¹æ¯”

| é¡¹ç›® | æ—§åˆçº¦ | æ–°åˆçº¦ |
|------|--------|--------|
| åœ°å€ | 0xB70b8bd1Fe19464b440C352a89A664314b8Fe4B5 | 0x4681BE5B76bACF483Ec7d6f228f6F4C31394c761 |
| è´¹ç‡ | 2.5% (ç¡¬ç¼–ç ) | 2.5% (å¯é…ç½® 0-10%) |
| è´¹ç”¨å¼€å…³ | âŒ æ—  | âœ… æœ‰ |
| ç®¡ç†å‡½æ•° | âŒ æ—  | âœ… 3 ä¸ª |
| è´¹ç”¨äº‹ä»¶ | âŒ æ—  | âœ… 2 ä¸ª |
| æµ‹è¯•ç”¨ä¾‹ | 12 ä¸ª | 19 ä¸ª |

## ğŸ’° è´¹ç”¨è®¡ç®—ç¤ºä¾‹

### åœºæ™¯ï¼šNFT å”®ä»· 1 MATICï¼Œåˆ›ä½œè€…ç‰ˆç¨ 5%

| å¹³å°è´¹ç‡ | å¹³å°æ”¶å…¥ | åˆ›ä½œè€…æ”¶å…¥ | å–å®¶æ”¶å…¥ |
|---------|---------|-----------|---------|
| 2.5% (é»˜è®¤) | 0.025 | 0.05 | 0.925 |
| 5% | 0.05 | 0.05 | 0.90 |
| 0% (å…³é—­) | 0 | 0.05 | 0.95 |

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œ

### å¿…é¡»å®Œæˆ
1. â³ **é‡å¯åç«¯æœåŠ¡**
   ```bash
   cd backend
   source ~/.envs/nfts/bin/activate
   uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
   ```

2. â³ **é‡å¯å‰ç«¯æœåŠ¡**
   ```bash
   cd frontend
   npm run dev
   ```

3. â³ **æµ‹è¯•å®Œæ•´æµç¨‹**
   - è¿æ¥ MetaMask
   - é“¸é€  NFT
   - æŒ‚å•å‡ºå”®
   - è´­ä¹° NFT
   - éªŒè¯è´¹ç”¨åˆ†é…

### å¯é€‰æ“ä½œ
4. â³ **æ¸…ç©ºæ•°æ®åº“**ï¼ˆå¦‚æœæƒ³é‡æ–°å¼€å§‹ï¼‰
   ```bash
   cd backend
   python -c "
   import asyncio
   from app.database import engine, Base
   async def reset():
       async with engine.begin() as conn:
           await conn.run_sync(Base.metadata.drop_all)
           await conn.run_sync(Base.metadata.create_all)
   asyncio.run(reset())
   "
   ```

5. â³ **è°ƒæ•´è´¹ç‡**ï¼ˆæ ¹æ®éœ€è¦ï¼‰
   ```bash
   cd contracts
   npx hardhat run scripts/manage-fees.js --network polygonAmoy
   ```

6. â³ **éªŒè¯åˆçº¦**ï¼ˆå¦‚æœä¹‹å‰å¤±è´¥ï¼‰
   ```bash
   cd contracts
   npx hardhat verify --network polygonAmoy 0x4681BE5B76bACF483Ec7d6f228f6F4C31394c761
   ```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **éƒ¨ç½²è¯¦æƒ…**: `CONFIGURABLE_FEE_DEPLOYMENT.md`
- **ç®¡ç†æŒ‡å—**: `FEE_MANAGEMENT_GUIDE.md`
- **åˆçº¦ä»£ç **: `contracts/contracts/NFTMarketplace.sol`
- **æµ‹è¯•ä»£ç **: `contracts/test/NFTMarketplace.test.js`

## ğŸ” å®‰å…¨æç¤º

âš ï¸ **é‡è¦**ï¼š
- åªæœ‰åˆçº¦ owner (`0x19C360231E261666CDB30f213cd76877f48bD21e`) å¯ä»¥ä¿®æ”¹è´¹ç”¨
- ä¿æŠ¤å¥½éƒ¨ç½²é’±åŒ…çš„ç§é’¥
- è´¹ç‡å˜æ›´ä¼šç«‹å³ç”Ÿæ•ˆï¼Œå½±å“æ‰€æœ‰åç»­äº¤æ˜“
- å»ºè®®è´¹ç‡ä¿æŒåœ¨ 1-5% ä¹‹é—´ï¼ˆè¡Œä¸šæ ‡å‡†ï¼‰
- é‡å¤§å˜æ›´å‰åº”é€šçŸ¥ç”¨æˆ·

## ğŸŠ åŠŸèƒ½äº®ç‚¹

1. **çµæ´»æ€§**: å¯éšæ—¶è°ƒæ•´è´¹ç‡ï¼Œé€‚åº”å¸‚åœºå˜åŒ–
2. **ä¿ƒé”€æ”¯æŒ**: å¯ä¸´æ—¶å…³é—­è´¹ç”¨è¿›è¡Œä¿ƒé”€æ´»åŠ¨
3. **å®‰å…¨ä¿æŠ¤**: 10% è´¹ç‡ä¸Šé™ï¼Œé˜²æ­¢æ¶æ„è®¾ç½®
4. **é€æ˜åº¦**: æ‰€æœ‰å˜æ›´éƒ½æœ‰é“¾ä¸Šäº‹ä»¶è®°å½•
5. **æ˜“ç”¨æ€§**: æä¾›äº¤äº’å¼ç®¡ç†å·¥å…·ï¼Œæ— éœ€ç¼–å†™ä»£ç 

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åˆçº¦åœ°å€æ˜¯å¦æ­£ç¡®æ›´æ–°
2. æœåŠ¡æ˜¯å¦æˆåŠŸé‡å¯
3. MetaMask æ˜¯å¦è¿æ¥åˆ°æ­£ç¡®ç½‘ç»œ
4. é’±åŒ…æ˜¯å¦æœ‰è¶³å¤Ÿçš„ MATIC

## ğŸ‰ æ€»ç»“

å¯é…ç½®å¹³å°è´¹ç”¨åŠŸèƒ½å·²æˆåŠŸå®æ–½ï¼ä½ ç°åœ¨å¯ä»¥ï¼š
- âœ… æ ¹æ®å¸‚åœºæƒ…å†µåŠ¨æ€è°ƒæ•´è´¹ç‡
- âœ… åœ¨ä¿ƒé”€æœŸé—´å…³é—­è´¹ç”¨
- âœ… é€šè¿‡ç®€å•å·¥å…·ç®¡ç†è´¹ç”¨é…ç½®
- âœ… ç›‘æ§æ‰€æœ‰è´¹ç”¨å˜æ›´è®°å½•

**ä¸‹ä¸€æ­¥**: é‡å¯æœåŠ¡å¹¶æµ‹è¯•æ–°åŠŸèƒ½ï¼

---

**éƒ¨ç½²æ—¶é—´**: 2026-01-07  
**åˆçº¦ç‰ˆæœ¬**: v2.0 (å¯é…ç½®è´¹ç”¨)  
**çŠ¶æ€**: âœ… éƒ¨ç½²æˆåŠŸï¼Œç­‰å¾…æœåŠ¡é‡å¯
